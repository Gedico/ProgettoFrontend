<div class="fp-wrap">
  <div class="fp-card">
    <header class="fp-head">
      <div class="fp-badge">
        <span class="fp-badge-dot"></span>
        Recupero password
      </div>

      <h2 class="fp-title">Reimposta in modo sicuro</h2>
      <p class="fp-subtitle">
        Inserisci l’email usata in fase di registrazione. Riceverai un link valido per <b>10 minuti</b>.
      </p>
    </header>

    <form class="fp-form" [formGroup]="forgotForm" (ngSubmit)="sendRequest()">
      <div class="fp-field">
        <label class="fp-label">Email</label>

        <div class="fp-input">
          <span class="fp-icon" aria-hidden="true">&#64;</span>
          <input
            type="email"
            placeholder="nome@esempio.com"
            formControlName="email"
            autocomplete="email"
            [class.input-error]="email?.touched && email?.invalid"
          />
        </div>

        @if (email?.touched && email?.invalid) {
          <small class="fp-error">Inserisci un’email valida</small>
        }
      </div>

      <button class="fp-btn" type="submit" [disabled]="forgotForm.invalid || loading">
        <span class="spinner" *ngIf="loading" aria-hidden="true"></span>
        {{ loading ? 'Invio in corso...' : 'Invia link di reset' }}
      </button>
    </form>

    @if (message) {
      <div class="fp-alert" [ngClass]="messageType">
        <div class="fp-alert-icon" aria-hidden="true">
          @if (messageType === 'success') { ✓ } @else { ! }
        </div>
        <div class="fp-alert-text">{{ message }}</div>
      </div>
    }

    <div class="fp-footer">
      <button type="button" class="fp-link" (click)="close()">Chiudi</button>
    </div>
  </div>
</div>
