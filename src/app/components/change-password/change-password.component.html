<div class="change-password-box">

  <h3>Sicurezza account</h3>

  <form [formGroup]="form" (ngSubmit)="submit()">

    <label>Password attuale</label>
    <input type="password" formControlName="oldPassword">

    @if (form.get('oldPassword')?.touched && form.get('oldPassword')?.invalid) {
      <small class="error">Campo obbligatorio</small>
    }

    <label>Nuova password</label>
    <input type="password" formControlName="newPassword">

    @if (form.get('newPassword')?.touched && form.get('newPassword')?.hasError('minlength')) {
      <small class="error">Minimo 8 caratteri</small>
    }

    <label>Conferma nuova password</label>
    <input type="password" formControlName="confirmPassword">

    @if (form["touched"] && form.hasError('passwordMismatch')) {
      <small class="error">Le password non coincidono</small>
    }

    <button class="btn-primary" [disabled]="loading || form.invalid">
      {{ loading ? 'Salvataggio...' : 'Aggiorna password' }}
    </button>

  </form>
</div>
