<h2 class="titolo">Le mie proposte</h2>

<!-- ===================== CARICAMENTO ===================== -->
@if (caricamento) {
  <div class="caricamento">
    Caricamento in corso...
  </div>
}

<!-- ===================== NESSUNA PROPOSTA ===================== -->
@if (!caricamento && proposte.length === 0) {
  <div class="vuoto">
    <p>Non hai ancora inviato alcuna proposta.</p>
  </div>
}

<!-- ===================== CONTROPROPOSTE AGENTE ===================== -->
@if (!caricamento && controproposteAttive.length > 0) {
  <h3 class="sottotitolo">Controproposte da gestire</h3>

  @for (p of controproposteAttive; track p.idProposta) {
    <div class="card controproposta">

      <div class="card-header">
        <h4>{{ p.titoloInserzione }}</h4>
        <span class="badge badge-controproposta">
          {{ labelStato(p.stato) }}
        </span>
      </div>

      <div class="info">
        <p>
          <strong>Importo proposto dall‚Äôagente:</strong>
          {{ p.importo | currency:'EUR':'symbol':'1.0-0' }}
        </p>

        <p>
          <strong>Data:</strong>
          {{ p.dataCreazione | date:'dd/MM/yyyy HH:mm' }}
        </p>

        <div class="azioni">
          <button
            class="btn-accetta"
            (click)="accetta(p)">
            ‚úî Accetta
          </button>

          <button
            class="btn-rifiuta"
            (click)="rifiuta(p)">
            ‚úñ Rifiuta
          </button>

          <button
            class="btn-dettagli"
            [routerLink]="['/inserzione', p.idInserzione]">
            üëÅ Vedi inserzione
          </button>

        </div>
      </div>

    </div>
  }
}

<!-- ===================== PROPOSTE INVIATE DALL‚ÄôUTENTE ===================== -->
@if (!caricamento && proposteInviate.length > 0) {
  <h3 class="sottotitolo">Proposte inviate</h3>

  @for (p of proposteInviate; track p.idProposta) {
    <div class="card">

      <div class="card-header">
        <h4>{{ p.titoloInserzione }}</h4>

        <span
          class="badge"
          [style.background]="coloreStato(p.stato)">
          {{ labelStato(p.stato) }}
        </span>
      </div>

      <div class="info">
        <p>
          <strong>Tua offerta:</strong>
          {{ p.importo | currency:'EUR':'symbol':'1.0-0' }}
        </p>

        <p>
          <strong>Data invio:</strong>
          {{ p.dataCreazione | date:'dd/MM/yyyy HH:mm' }}
        </p>

        <button
          class="btn-dettagli"
          [routerLink]="['/inserzione', p.idInserzione]">
          üëÅ Vedi inserzione
        </button>
      </div>

    </div>
  }
}
